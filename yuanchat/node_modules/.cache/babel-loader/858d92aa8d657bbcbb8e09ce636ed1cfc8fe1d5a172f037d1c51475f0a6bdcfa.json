{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { useStore } from 'vuex';\nimport NIM from 'nim-web-sdk-ng';\nimport dayjs from 'dayjs';\nexport default {\n  name: 'ConversationList',\n  data() {\n    return {\n      conversationList: [],\n      // 存储会话列表数据\n      syncFinish: false,\n      nim: null,\n      selectedConversation: null,\n      currentMessages: [],\n      newMessage: '',\n      // 新增用户信息缓存\n      userInfoCache: new Map()\n    };\n  },\n  mounted() {\n    const store = useStore();\n    this.nim = store.state.nim;\n    if (!this.nim) {\n      const nimConfig = this.$store.state.nimConfig;\n      console.log(`=== NIM 初始化配置 ${nimConfig}`);\n      this.nim = NIM.getInstance({\n        appkey: nimConfig[0],\n        debugLevel: \"debug\",\n        apiVersion: \"v2\"\n      });\n      if (this.nim) {\n        this.$store.commit('setNim', this.nim);\n        console.log('=== NIM 已初始化');\n        if (this.nim.V2NIMLoginService) {\n          this.nim.V2NIMLoginService.login(nimConfig[1], nimConfig[2], {\n            \"forceMode\": false\n          }).then(() => {\n            console.log('=== 登录成功');\n          }).catch(err => {\n            console.error('=== 登录失败:', err);\n          });\n        }\n      }\n    } else {\n      console.log('=== NIM 不需要初始化');\n    }\n    this.nim.V2NIMConversationService.on(\"onSyncFinished\", () => {\n      console.log('=== NIM 同步完成');\n      this.syncFinish = true;\n      this.getConversationList();\n    });\n  },\n  methods: {\n    async getConversationList() {\n      console.log('=== NIM 获取会话列表');\n      try {\n        const result = await this.nim.V2NIMConversationService.getConversationList(0, 100);\n        if (result) {\n          this.conversationList = result.conversationList;\n          for (let index = 0; index < result.conversationList.length; index++) {\n            const element = result.conversationList[index];\n            console.log(`=== ${element.name}`);\n          }\n        }\n      } catch (err) {\n        console.error(`=== 获取最近会话列表失败: ${err} ==`);\n      }\n    },\n    getAvatar(conversation) {\n      if (conversation.avatar) {\n        return conversation.avatar;\n      }\n      const initials = conversation.name.slice(0, 2).toUpperCase();\n      const canvas = document.createElement('canvas');\n      canvas.width = 40;\n      canvas.height = 40;\n      const ctx = canvas.getContext('2d');\n      ctx.fillStyle = '#ccc';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      ctx.font = '20px Arial';\n      ctx.fillStyle = '#fff';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(initials, canvas.width / 2, canvas.height / 2);\n      return canvas.toDataURL();\n    },\n    // 新增用户信息获取方法\n    async fetchUserInfo(userId) {\n      if (!this.userInfoCache.has(userId)) {\n        try {\n          console.log('=== 获取用户信息:', userId);\n          const users = await this.nim.V2NIMUserService.getUserList([userId]);\n          this.userInfoCache.set(userId, users[0]);\n        } catch (err) {\n          console.error('=== 获取用户信息失败:', err);\n          this.userInfoCache.set(userId, {\n            name: `用户${userId.slice(-4)}`,\n            avatar: this.generateDefaultAvatar(userId)\n          });\n        }\n      }\n      return this.userInfoCache.get(userId);\n    },\n    // 生成默认头像\n    generateDefaultAvatar(userId) {\n      const canvas = document.createElement('canvas');\n      canvas.width = 40;\n      canvas.height = 40;\n      const ctx = canvas.getContext('2d');\n      ctx.fillStyle = '#ccc';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      ctx.font = '16px Arial';\n      ctx.fillStyle = '#fff';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(userId.slice(-2), canvas.width / 2, canvas.height / 2);\n      return canvas.toDataURL();\n    },\n    // 获取用户头像\n    getUserAvatar(userId) {\n      return this.userInfoCache.get(userId)?.avatar || this.generateDefaultAvatar(userId);\n    },\n    // 获取用户名\n    getUserName(userId) {\n      return this.userInfoCache.get(userId)?.name || `用户${userId.slice(-4)}`;\n    },\n    async loadMessages(conversation) {\n      try {\n        const result = await this.nim.V2NIMMessageService.getMessageList({\n          conversationId: conversation.conversationId,\n          limit: 50\n        });\n\n        // 批量获取用户信息\n        const uniqueUserIds = [...new Set(result.map(msg => msg.fromAccount))];\n        console.log(`=== 批量获取用户信息：${uniqueUserIds}`);\n        await Promise.all(uniqueUserIds.map(userId => this.fetchUserInfo(userId)));\n        this.currentMessages = result.map(msg => ({\n          content: msg.text,\n          timestamp: msg.createTime,\n          isOutgoing: !msg.isSelf,\n          senderId: msg.fromAccount // 添加发送者ID\n        }));\n      } catch (err) {\n        console.error('=== 加载消息失败:', err.detail);\n      }\n    },\n    sendMessage() {\n      if (!this.newMessage.trim()) return;\n      const message = {\n        sessionId: this.selectedConversation.sessionId,\n        sessionType: this.selectedConversation.sessionType,\n        content: this.newMessage,\n        timestamp: Date.now(),\n        isOutgoing: true\n      };\n\n      // 调用SDK发送消息\n      this.nim.V2NIMMessageService.sendMessage(message);\n\n      // 本地临时显示\n      this.currentMessages.push(message);\n      this.newMessage = '';\n    },\n    formatTime(timestamp) {\n      return dayjs(timestamp).format('HH:mm');\n    }\n  }\n};","map":{"version":3,"names":["useStore","NIM","dayjs","name","data","conversationList","syncFinish","nim","selectedConversation","currentMessages","newMessage","userInfoCache","Map","mounted","store","state","nimConfig","$store","console","log","getInstance","appkey","debugLevel","apiVersion","commit","V2NIMLoginService","login","then","catch","err","error","V2NIMConversationService","on","getConversationList","methods","result","index","length","element","getAvatar","conversation","avatar","initials","slice","toUpperCase","canvas","document","createElement","width","height","ctx","getContext","fillStyle","fillRect","font","textAlign","textBaseline","fillText","toDataURL","fetchUserInfo","userId","has","users","V2NIMUserService","getUserList","set","generateDefaultAvatar","get","getUserAvatar","getUserName","loadMessages","V2NIMMessageService","getMessageList","conversationId","limit","uniqueUserIds","Set","map","msg","fromAccount","Promise","all","content","text","timestamp","createTime","isOutgoing","isSelf","senderId","detail","sendMessage","trim","message","sessionId","sessionType","Date","now","push","formatTime","format"],"sources":["/Users/yaoxiao/Desktop/Trae/my-vue-app/src/components/ConversationList.vue"],"sourcesContent":["<template>\n  <!-- 添加外层容器包裹两个区域 -->\n  <div class=\"main-container\">\n    <div class=\"conversation-list-container\">\n      <h1>最近会话</h1>\n      <ul>\n        <!-- 渲染会话列表 -->\n        <li v-for=\"conversation in conversationList\" :key=\"conversation.id\" \n            @click=\"selectedConversation = conversation; loadMessages(conversation)\">\n          <!-- 显示头像 -->\n          <img :src=\"getAvatar(conversation)\" alt=\"Avatar\" class=\"avatar\">\n          {{ conversation.name }}\n        </li>\n      </ul>\n    </div>\n  \n    <div class=\"message-detail-container\">\n      <div v-if=\"selectedConversation\" class=\"message-area\">\n        <!-- 消息历史 -->\n        <div class=\"message-history\">\n          <div v-for=\"(message, index) in currentMessages\" :key=\"index\" \n               class=\"message-bubble\" :class=\"{ 'my-message': message.isOutgoing }\">\n            <!-- 添加发送者信息 -->\n            <div class=\"sender-info\">\n              <img :src=\"getUserAvatar(message.senderId)\" class=\"message-avatar\">\n              <span class=\"sender-name\">{{ getUserName(message.senderId) }}</span>\n            </div>\n            <div class=\"message-content\">{{ message.content }}</div>\n            <div class=\"message-time\">{{ formatTime(message.timestamp) }}</div>\n          </div>\n        </div>\n        \n        <!-- 消息发送框 -->\n        <div class=\"message-input-area\">\n          <input v-model=\"newMessage\" @keyup.enter=\"sendMessage\" \n                 placeholder=\"输入消息...\">\n          <button @click=\"sendMessage\">发送</button>\n        </div>\n      </div>\n      \n      <div v-else class=\"empty-state\">\n        请选择会话开始聊天\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useStore } from 'vuex';\nimport NIM from 'nim-web-sdk-ng';\nimport dayjs from 'dayjs'\n\nexport default {\n  name: 'ConversationList',\n  data() {\n    return {\n      conversationList: [], // 存储会话列表数据\n      syncFinish: false,\n      nim: null,\n      selectedConversation: null,\n      currentMessages: [],\n      newMessage: '',\n      // 新增用户信息缓存\n      userInfoCache: new Map(),\n    };\n  },\n  mounted() {\n    const store = useStore();\n    this.nim = store.state.nim;\n\n    if (!this.nim) {\n      const nimConfig = this.$store.state.nimConfig;\n      console.log(`=== NIM 初始化配置 ${nimConfig}`);\n      this.nim = NIM.getInstance({\n        appkey: nimConfig[0],\n        debugLevel: \"debug\",\n        apiVersion: \"v2\"\n      });\n      if (this.nim) {\n        this.$store.commit('setNim', this.nim);\n        console.log('=== NIM 已初始化');\n        if (this.nim.V2NIMLoginService) {\n          this.nim.V2NIMLoginService.login(nimConfig[1], nimConfig[2], {\n            \"forceMode\": false\n          }).then(() => {\n            console.log('=== 登录成功');\n          }).catch((err) => {\n            console.error('=== 登录失败:', err);\n          });\n        }\n\n      }\n    } else {\n      console.log('=== NIM 不需要初始化');\n    }\n    this.nim.V2NIMConversationService.on(\"onSyncFinished\", () => {\n      console.log('=== NIM 同步完成');\n      this.syncFinish = true;\n      this.getConversationList();\n    });\n  },\n  methods: {\n    async getConversationList() {\n      console.log('=== NIM 获取会话列表');\n      try {\n        const result = await this.nim.V2NIMConversationService.getConversationList(0, 100);\n        if (result) {\n          this.conversationList = result.conversationList;\n          for (let index = 0; index < result.conversationList.length; index++) {\n            const element = result.conversationList[index];\n            console.log(`=== ${element.name}`);\n          }\n        }\n      } catch (err) {\n        console.error(`=== 获取最近会话列表失败: ${err} ==`);\n      }\n    },\n\n    getAvatar(conversation) {\n      if (conversation.avatar) {\n        return conversation.avatar;\n      }\n      const initials = conversation.name.slice(0, 2).toUpperCase();\n      const canvas = document.createElement('canvas');\n      canvas.width = 40;\n      canvas.height = 40;\n      const ctx = canvas.getContext('2d');\n      ctx.fillStyle = '#ccc';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      ctx.font = '20px Arial';\n      ctx.fillStyle = '#fff';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(initials, canvas.width / 2, canvas.height / 2);\n      return canvas.toDataURL();\n    },\n\n    // 新增用户信息获取方法\n    async fetchUserInfo(userId) {\n      if (!this.userInfoCache.has(userId)) {\n        try {\n          console.log('=== 获取用户信息:', userId);\n          const users = await this.nim.V2NIMUserService.getUserList([userId]);\n          this.userInfoCache.set(userId, users[0]);\n        } catch (err) {\n          console.error('=== 获取用户信息失败:', err);\n          this.userInfoCache.set(userId, { \n            name: `用户${userId.slice(-4)}`,\n            avatar: this.generateDefaultAvatar(userId)\n          });\n        }\n      }\n      return this.userInfoCache.get(userId);\n    },\n    \n    // 生成默认头像\n    generateDefaultAvatar(userId) {\n      const canvas = document.createElement('canvas');\n      canvas.width = 40;\n      canvas.height = 40;\n      const ctx = canvas.getContext('2d');\n      ctx.fillStyle = '#ccc';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      ctx.font = '16px Arial';\n      ctx.fillStyle = '#fff';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(userId.slice(-2), canvas.width/2, canvas.height/2);\n      return canvas.toDataURL();\n    },\n    \n    // 获取用户头像\n    getUserAvatar(userId) {\n      return this.userInfoCache.get(userId)?.avatar || this.generateDefaultAvatar(userId);\n    },\n    \n    // 获取用户名\n    getUserName(userId) {\n      return this.userInfoCache.get(userId)?.name || `用户${userId.slice(-4)}`;\n    },\n    \n    async loadMessages(conversation) {\n      try {\n        const result = await this.nim.V2NIMMessageService.getMessageList({\n          conversationId: conversation.conversationId,\n          limit: 50,\n        });\n        \n        // 批量获取用户信息\n        const uniqueUserIds = [...new Set(result.map(msg => msg.fromAccount))];\n        console.log(`=== 批量获取用户信息：${uniqueUserIds}`)\n        await Promise.all(uniqueUserIds.map(userId => this.fetchUserInfo(userId)));\n        \n        this.currentMessages = result.map(msg => ({\n          content: msg.text,\n          timestamp: msg.createTime,\n          isOutgoing: !msg.isSelf,\n          senderId: msg.fromAccount  // 添加发送者ID\n        }));\n      } catch (err) {\n        console.error('=== 加载消息失败:', err.detail);\n      }\n    },\n    \n    sendMessage() {\n      if (!this.newMessage.trim()) return;\n      \n      const message = {\n        sessionId: this.selectedConversation.sessionId,\n        sessionType: this.selectedConversation.sessionType,\n        content: this.newMessage,\n        timestamp: Date.now(),\n        isOutgoing: true\n      }\n      \n      // 调用SDK发送消息\n      this.nim.V2NIMMessageService.sendMessage(message);\n      \n      // 本地临时显示\n      this.currentMessages.push(message);\n      this.newMessage = '';\n    },\n    \n    formatTime(timestamp) {\n      return dayjs(timestamp).format('HH:mm');\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 新增外层容器样式 */\n.main-container {\n  display: flex;\n  height: 90vh; /* 恢复全屏高度 */\n}\n\n/* 会话列表容器 */\n.conversation-list-container {\n  width: 33.33%;\n  overflow-y: auto; /* 仅会话列表滚动 */\n  height: 100%;     /* 继承外层高度 */\n}\n\n/* 消息详情容器 */\n.message-detail-container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  height: 100%; /* 继承外层高度 */\n}\n\n/* 消息区域 */\n.message-area {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden; /* 防止内容溢出 */\n}\n\n/* 消息历史 */\n.message-history {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  display: flex;          /* 新增 */\n  flex-direction: column; /* 新增 */\n}\n\n/* 消息气泡新增样式 */\n.message-bubble {\n  max-width: 70%;\n  min-width: 60px;\n  margin: 8px 0;\n  padding: 12px 16px;\n  border-radius: 18px;\n  background: #f0f0f0;\n  margin-right: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.message-bubble.my-message {\n  background: #0084ff;\n  color: white;\n  margin-left: auto;\n  margin-right: 0;\n}\n\n/* 发送者信息样式 */\n.sender-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 4px;\n}\n\n.message-avatar {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.sender-name {\n  font-size: 12px;\n  color: #666;\n}\n\n/* 调整右侧消息文字颜色 */\n.message-bubble.my-message .message-content {\n  color: white;\n}\n\n.message-bubble.my-message .message-time {\n  color: rgba(255, 255, 255, 0.8);\n}\n\n/* 修复输入框嵌套样式问题（Vue scoped样式不支持嵌套写法） */\n.message-input-area {\n  padding: 0 20px 20px; /* 添加左右间距 */\n  display: flex;\n  gap: 10px;\n}\n\n.message-input-area input {\n  flex: 1;\n  padding: 12px 16px;\n  border: 1px solid #ddd;\n  border-radius: 20px;\n  padding-right: 80px; /* 为按钮预留空间 */\n}\n\n.message-input-area button {\n  position: absolute;\n  right: 30px; /* 与容器右间距对齐 */\n  bottom: 30px; /* 与容器底部间距对齐 */\n  padding: 10px 20px;\n  background: #0084ff;\n  color: white;\n  border: none;\n  border-radius: 18px;\n  cursor: pointer;\n  transition: opacity 0.2s;\n}\n\n.message-input-area button:hover {\n  opacity: 0.9;\n}\n\n.empty-state {\n  display: flex;\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n  color: #999;\n}\n\n/* 头像样式 */\n.avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  margin-right: 10px;\n  vertical-align: middle;\n  object-fit: cover; /* 新增图片裁剪方式 */\n  flex-shrink: 0;    /* 防止头像被压缩 */\n}\n\n/* 列表项样式 */\nli {\n  padding: 10px 15px; /* 调整内边距 */\n  display: flex;      /* 启用flex布局 */\n  align-items: center;/* 垂直居中 */\n  gap: 10px;         /* 元素间距 */\n  border-bottom: 1px solid #e0e0e0;\n  color: #333;\n  background-color: #f9f9f9;\n  transition: background-color 0.3s ease;\n}\n\n/* 文字容器添加弹性布局 */\nli > span {\n  flex: 1;\n  text-align: left;  /* 保证文字居左 */\n}\n\n.message-content {\n  word-break: break-word;\n}\n\n.message-time {\n  font-size: 12px;\n  margin-top: 4px;\n  text-align: right; /* 时间始终右对齐 */\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}