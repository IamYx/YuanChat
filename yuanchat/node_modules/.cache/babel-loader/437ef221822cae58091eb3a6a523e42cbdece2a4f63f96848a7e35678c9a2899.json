{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport V2NIM from 'nim-web-sdk-ng';\nimport router from '@/router';\nconst APPKEY = '4727023efa991d31d61b3b32e819bd5b';\nexport default {\n  data() {\n    return {\n      username: '',\n      password: '',\n      nim: null\n    };\n  },\n  mounted() {\n    const params1 = {\n      \"appkey\": APPKEY,\n      \"debugLevel\": \"debug\",\n      \"apiVersion\": \"v2\",\n      \"enableV2CloudConversation\": true\n    };\n    const params2 = {\n      \"V2NIMLoginServiceConfig\": {\n        \"lbsUrls\": [\"https://lbs.netease.im/lbs/webconf.jsp\"],\n        \"linkUrl\": \"weblink.netease.im:443\"\n      }\n    };\n    this.nim = V2NIM.getInstance(params1, params2);\n    console.log('=== 初始化成功');\n  },\n  methods: {\n    async handleLogin() {\n      // this.nim = NIM.getInstance({\n      //   appkey: APPKEY,\n      //   debugLevel: \"debug\",\n      //   apiVersion: \"v2\",\n      //   lbsUrls: ['https://yunxin.yto56test.com:7443/lbs/webconf.jsp'],\n      //   linkUrl: 'yunxin.yto56test.com:7443',\n      // });\n\n      this.$store.commit('setNim', this.nim);\n      await this.nim.V2NIMLoginService.login(this.username, this.password, {\n        \"forceMode\": false\n      }).then(() => {\n        console.log('=== 登录成功');\n        this.$store.commit('setNimConfig', [APPKEY, this.username, this.password]);\n        router.push({\n          name: 'ConversationList'\n        }).then(() => {\n          console.log('=== 成功跳转到了 ConversationList 页面');\n        }).catch(error => {\n          console.error('=== 路由跳转失败:', error);\n        });\n      }).catch(err => {\n        console.error('=== 登录失败:', err);\n      });\n      const theListnerFn = status => {\n        switch (status) {\n          case 0:\n            console.log('=== 登出成功');\n            break;\n          case 1:\n            console.log('=== 登录成功');\n            // Login successful, navigate to the conversation list page\n            break;\n          case 2:\n            console.log('=== 登录中');\n            break;\n          case 3:\n            console.log('=== 登录失败');\n            break;\n          default:\n            console.log('=== 未知的登录状态:', status);\n        }\n      };\n      this.nim.V2NIMLoginService.on(\"onLoginStatus\", theListnerFn);\n    }\n  }\n};","map":{"version":3,"names":["V2NIM","router","APPKEY","data","username","password","nim","mounted","params1","params2","getInstance","console","log","methods","handleLogin","$store","commit","V2NIMLoginService","login","then","push","name","catch","error","err","theListnerFn","status","on"],"sources":["/Users/yaoxiao/Desktop/cloneproject/YuanChat/yuanchat/src/components/HelloWorld.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <h1>登录页面</h1>\n    <form @submit.prevent=\"handleLogin\">\n      <input type=\"text\" v-model=\"username\" placeholder=\"用户名\" required />\n      <input type=\"password\" v-model=\"password\" placeholder=\"密码\" required />\n      <button type=\"submit\">登录</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport V2NIM from 'nim-web-sdk-ng';\nimport router from '@/router';\n\nconst APPKEY = '4727023efa991d31d61b3b32e819bd5b';\n\nexport default {\n  data() {\n    return {\n      username: '',\n      password: '',\n      nim: null\n    };\n  },\n  mounted() {\n    const params1 = {\n          \"appkey\": APPKEY,\n          \"debugLevel\": \"debug\",\n          \"apiVersion\": \"v2\",\n          \"enableV2CloudConversation\": true,\n      }\n      const params2 = {\n          \"V2NIMLoginServiceConfig\": {\n              \"lbsUrls\": [\"https://lbs.netease.im/lbs/webconf.jsp\"\n              ],\n              \"linkUrl\": \"weblink.netease.im:443\"\n          },\n      }\n\n      this.nim = V2NIM.getInstance(params1, params2);\n\n      console.log('=== 初始化成功');\n  },\n  methods: {\n    async handleLogin() {\n      // this.nim = NIM.getInstance({\n      //   appkey: APPKEY,\n      //   debugLevel: \"debug\",\n      //   apiVersion: \"v2\",\n      //   lbsUrls: ['https://yunxin.yto56test.com:7443/lbs/webconf.jsp'],\n      //   linkUrl: 'yunxin.yto56test.com:7443',\n      // });\n\n      this.$store.commit('setNim', this.nim); \n\n      await this.nim.V2NIMLoginService.login(this.username, this.password, {\n        \"forceMode\": false\n      }).then(() => {\n        console.log('=== 登录成功');\n        this.$store.commit('setNimConfig', [APPKEY, this.username, this.password]);\n        router.push({ name: 'ConversationList' })\n              .then(() => {\n                  console.log('=== 成功跳转到了 ConversationList 页面');\n              })\n              .catch((error) => {\n                  console.error('=== 路由跳转失败:', error);\n              });\n      }).catch((err) => {\n        console.error('=== 登录失败:', err);\n      });\n\n      const theListnerFn = (status) => {\n        switch (status) {\n          case 0:\n            console.log('=== 登出成功');\n            break;\n          case 1:\n            console.log('=== 登录成功');\n            // Login successful, navigate to the conversation list page\n            break;\n          case 2:\n            console.log('=== 登录中');\n            break;\n          case 3:\n            console.log('=== 登录失败');\n            break;\n          default:\n            console.log('=== 未知的登录状态:', status);\n        }\n      };\n\n      this.nim.V2NIMLoginService.on(\"onLoginStatus\", theListnerFn);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.login-container {\n  max-width: 300px;\n  margin: 0 auto;\n  padding: 20px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  background-color: #f9f9f9;\n}\n\n.login-container h1 {\n  text-align: center;\n  margin-bottom: 20px;\n  /* 修改字体样式 */\n  font-family: \"Segoe UI\", Tahoma, Geneva, Verdana, sans-serif;\n  font-size: 28px;\n  color: #333;\n  font-weight: 600;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n.login-container input {\n  width: calc(100% - 22px);\n  padding: 10px;\n  margin-bottom: 15px;\n  border: 1px solid #ccc;\n  border-radius: 3px;\n  box-sizing: border-box;\n}\n\n.login-container button {\n  width: 100%;\n  padding: 10px;\n  background-color: #007bff;\n  color: #fff;\n  border: none;\n  border-radius: 3px;\n  cursor: pointer;\n}\n\n.login-container button:hover {\n  background-color: #0056b3;\n}\n</style>"],"mappings":";AAYA,OAAOA,KAAI,MAAO,gBAAgB;AAClC,OAAOC,MAAK,MAAO,UAAU;AAE7B,MAAMC,MAAK,GAAI,kCAAkC;AAEjD,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,GAAG,EAAE;IACP,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,MAAMC,OAAM,GAAI;MACV,QAAQ,EAAEN,MAAM;MAChB,YAAY,EAAE,OAAO;MACrB,YAAY,EAAE,IAAI;MAClB,2BAA2B,EAAE;IACjC;IACA,MAAMO,OAAM,GAAI;MACZ,yBAAyB,EAAE;QACvB,SAAS,EAAE,CAAC,wCAAuC,CAClD;QACD,SAAS,EAAE;MACf;IACJ;IAEA,IAAI,CAACH,GAAE,GAAIN,KAAK,CAACU,WAAW,CAACF,OAAO,EAAEC,OAAO,CAAC;IAE9CE,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;EAC5B,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,WAAWA,CAAA,EAAG;MAClB;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAACV,GAAG,CAAC;MAEtC,MAAM,IAAI,CAACA,GAAG,CAACW,iBAAiB,CAACC,KAAK,CAAC,IAAI,CAACd,QAAQ,EAAE,IAAI,CAACC,QAAQ,EAAE;QACnE,WAAW,EAAE;MACf,CAAC,CAAC,CAACc,IAAI,CAAC,MAAM;QACZR,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;QACvB,IAAI,CAACG,MAAM,CAACC,MAAM,CAAC,cAAc,EAAE,CAACd,MAAM,EAAE,IAAI,CAACE,QAAQ,EAAE,IAAI,CAACC,QAAQ,CAAC,CAAC;QAC1EJ,MAAM,CAACmB,IAAI,CAAC;UAAEC,IAAI,EAAE;QAAmB,CAAC,EACjCF,IAAI,CAAC,MAAM;UACRR,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;QACjD,CAAC,EACAU,KAAK,CAAEC,KAAK,IAAK;UACdZ,OAAO,CAACY,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;QACvC,CAAC,CAAC;MACV,CAAC,CAAC,CAACD,KAAK,CAAEE,GAAG,IAAK;QAChBb,OAAO,CAACY,KAAK,CAAC,WAAW,EAAEC,GAAG,CAAC;MACjC,CAAC,CAAC;MAEF,MAAMC,YAAW,GAAKC,MAAM,IAAK;QAC/B,QAAQA,MAAM;UACZ,KAAK,CAAC;YACJf,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;YACvB;UACF,KAAK,CAAC;YACJD,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;YACvB;YACA;UACF,KAAK,CAAC;YACJD,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;YACtB;UACF,KAAK,CAAC;YACJD,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;YACvB;UACF;YACED,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEc,MAAM,CAAC;QACvC;MACF,CAAC;MAED,IAAI,CAACpB,GAAG,CAACW,iBAAiB,CAACU,EAAE,CAAC,eAAe,EAAEF,YAAY,CAAC;IAC9D;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}